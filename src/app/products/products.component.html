<div class="content-container">
  <div class="content-inner-container">

    <div *ngIf="initialLoading" class="initial-spinner-container">
      <mat-spinner class="initial-spinner" diameter="140"></mat-spinner>
    </div>

    <div *ngIf="!initialLoading && products.length == 0" class="no-results-container">
      <p>Nincs találat.</p>
    </div>

    <table *ngIf="!initialLoading && products.length > 0" class="table">

      <!-- Table head -->
      <thead>
        <tr>
          <th class="image-column"></th>
          <th>Megnevezés</th>
          <th>Gyártmány</th>
          <th>Ár</th>
          <th>Készlet</th>
          <th class="order-column">Rendelés</th>
          <th class="action-column">Egyéb</th>
        </tr>
      </thead>

      <!-- Table body -->
      <tbody>
        <tr *ngFor="let product of products">

          <!-- Product image -->
          <td>
            <div class="product-img-container">
              <img class="product-img" src="{{ product.imgurls[0].replace('[', '').replace(']', '').replace('/t_t100x100v2', '') }}" [routerLink]="['/product', product.partNumber]">
            </div>
          </td>

          <!-- Product number and name-->
          <td>
            <div class="name-container">
              <p class="product-partnumber" [routerLink]="['/product', product.partNumber]">{{ product.partNumber }}</p>
              <p class="product-name">{{ product.name }}</p>
            </div>
          </td>

          <!-- Product brand-->
          <td>{{ product.brand }}</td>

          <!-- Product price -->
          <td class="price-container">
            <p class="final-price">{{ formatPriceToString(addTax(product.price)) }}</p>
            <p class="net-price">{{ formatPriceToString(product.price) }} + áfa</p>
          </td>

          <!-- Product stock -->
          <td>
            <div *ngIf="product.stock > 0">
              <p *ngIf="product.stock > 5" class="in-stock">Raktáron (5+)</p>
              <p *ngIf="product.stock <= 5" class="in-stock">Raktáron ({{ product.stock }})</p>
            </div>
            <p *ngIf="product.stock <= 0" class="out-of-stock">Nincs raktáron</p>
          </td>

          <!-- Quantity input and cart button -->
          <td>
            <div class="amount-container">
              <div class="amount-button input-negative" (click)="decrementInputValue(product.partNumber)">-</div>
              <input [id]="product.partNumber" class="amount-input" type="number" value="1" #quantity>
              <div class="amount-button input-positive" (click)="incrementInputValue(product.partNumber)">+</div>
            </div>

            <button mat-raised-button class="cart-button" (click)="addToCart(product)">Kosárba</button>
          </td>

          <!-- Other buttons -->
          <td class="extra-button-container">
            <p class="extra-button" (click)="addToWishList(product)">Kívánságlistához adás</p>
            <p class="extra-button">Kérdésem van a termékkel kapcsolatban</p>
          </td>
        </tr>

      </tbody>
    </table>
  </div>
</div>