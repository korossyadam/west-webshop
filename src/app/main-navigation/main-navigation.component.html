<!-- Decoration shapes -->
<div class="box-middle"></div>
<div class="parallelogram-left"></div>
<div class="parallelogram-right"></div>

<!-- Logo -->
<h2 class="logo"><a class="no-href-decoration" href="main"><span class="orange">WEST</span> ALKATRÉSZ</a></h2>

<!-- Upper bar -->
<div class="container">
   <div class="topnav fixed">

      <!-- Home Button -->
      <!-- <a class="menu-option" [ngClass]="{'active': step === 0}" routerLink="/main" (click)="searchedSomething = false; isIf = false; step = 0;">Főoldal</a> -->
      <!-- <button mat-icon-button class="home-icon" color="warn" routerLink="/main" (click)="searchedSomething = false; isIf = false; step = 0;"> -->
      <!--    <mat-icon><span class="material-icons-outlined"> -->
      <!--       other_houses -->
      <!--       </span></mat-icon> -->
      <!-- </button> -->

      <button class="carselect-button" mat-raised-button color="warn" (click)="onCarSelectorButtonClick()">Jármű kiválasztása</button>
      <button class="offer-button" mat-raised-button (click)="onCarSelectorButtonClick()">Árajánlat kérése</button>

      <!-- Login buttons -->
      <div *ngIf="localStorageUser() == ''">
         <a class="login-text" routerLink="/login">Bejelentkezés</a>
         <a class="login-text" routerLink="/login">Regisztráció</a>
      </div>
      <div *ngIf="localStorageUser() != ''">


      </div>

   </div>
</div>


<!-- Search bar in the middle -->
<div class="fixed text">

   <!-- Search bar -->
   <div style="font-size: 16px">
      <mat-form-field class="form-field" appearance="legacy">
         <mat-label>Termék keresése</mat-label>
         <input matInput #inputText (input)="searchedText = inputText.value" placeholder="Cikkszám, gyári szám.." maxlength="64" autocomplete="off" [(ngModel)]="value">

         <button *ngIf="value" matSuffix mat-icon-button aria-label="Clear" (click)="value=''">
            <mat-icon>close</mat-icon>
         </button>
      </mat-form-field>
   </div>

   <!-- Search button -->
   <button mat-icon-button class="search-icon" color="warn" (click)="updatChildIf(); onSearch();">
      <mat-icon>search</mat-icon>
   </button>

</div>

<!-- Home -->
<div *ngIf="localStorageUser() != ''" class="dropdown menu-position">
   <button class="dropbtn" (mouseover)="secondHover = -1">Főoldal<mat-icon class="arrow">expand_more</mat-icon></button>
   <div class="dropdown-content">
      <a routerLink="/main" (mouseover)="secondHover = 0">Főoldal<mat-icon class="arrow-expand">chevron_right</mat-icon></a>
      <a routerLink="/main" (mouseover)="secondHover = 1">Méret szerinti keresők<mat-icon class="arrow-expand">chevron_right</mat-icon></a>
      <a routerLink="/main" (mouseover)="secondHover = 2">Katalógusok<mat-icon class="arrow-expand">chevron_right</mat-icon></a>
   </div>

   <div *ngIf="secondHover == 2" class="dropdown-horizontal">
      <a href="https://www.motul.com/hu/hu/lubricants" target="_blank">Motul olajkereső</a>
      <a href="https://www.mobil.co.uk/en-gb/product-selector/" target="_blank">Mobil 1 olajkereső</a>
      <a href="https://applications.castrol.com/oilselector/hu_hu/c/search" target="_blank">Castrol olajkereső</a>
      <a href="http://total-dnk.lubricantadvisor.com/default.aspx?lang=eng&br=elf" target="_blank">Total olajkereső</a>
   </div>
</div>

<!-- Equipment -->
<div *ngIf="localStorageUser() != ''" class="dropdown tools-position">
   <button class="dropbtn" (mouseover)="secondHover = -1">Garázs felszerelések<mat-icon class="arrow">expand_more</mat-icon></button>

   <!-- Equipment: First list -->
   <div class="dropdown-content">
      <a routerLink="/profile" (mouseover)="secondHover = 0; thirdHover = -1">Szerszámok<mat-icon class="arrow-expand">chevron_right</mat-icon></a>
      <a routerLink="/profile" (mouseover)="secondHover = 1; thirdHover = -1">Garázs berendezések<mat-icon class="arrow-expand">chevron_right</mat-icon></a>
      <a routerLink="/profile" (mouseover)="secondHover = 2; thirdHover = -1">Munkavédelmi kellékek<mat-icon class="arrow-expand">chevron_right</mat-icon></a>
      <a routerLink="/profile" (mouseover)="secondHover = 3; thirdHover = -1">Univerzális tartozékok<mat-icon class="arrow-expand">chevron_right</mat-icon></a>
   </div>

   <!-- Equipment: Second list -->
   <div *ngIf="secondHover == 0" class="dropdown-horizontal index-zero">
      <a routerLink="/profile">Kézi szerszámok</a>
      <a routerLink="/profile">Elektromos szerszámok</a>
      <a routerLink="/profile">Pneumatikus szerszámok</a>
      <a routerLink="/profile">Mérőeszközök</a>
   </div>

   <div *ngIf="secondHover == 1" class="dropdown-horizontal index-one">
      <a routerLink="/profile" (mouseover)="thirdHover = 0">Műhelyhigiénia<mat-icon class="arrow-expand">chevron_right</mat-icon></a>
      <a routerLink="/profile" (mouseover)="thirdHover = 1">Klíma szervíz<mat-icon class="arrow-expand">chevron_right</mat-icon></a>
      <a routerLink="/profile" (mouseover)="thirdHover = 2">Akkumulátor szervíz<mat-icon class="arrow-expand">chevron_right</mat-icon></a>
   </div>

   <div *ngIf="secondHover == 2" class="dropdown-horizontal index-two">
      <a routerLink="/profile">Ruházat</a>
      <a routerLink="/profile">Biztonsági felszerelés</a>
   </div>

   <div *ngIf="secondHover == 3" class="dropdown-horizontal index-three">
      <a routerLink="/profile" (mouseover)="thirdHover = 0">Alátétek és O-gyűrűk<mat-icon class="arrow-expand">chevron_right</mat-icon></a>
      <a routerLink="/profile" (mouseover)="thirdHover = 1">Biztosítékok<mat-icon class="arrow-expand">chevron_right</mat-icon></a>
      <a routerLink="/profile">Csavaranyák</a>
      <a routerLink="/profile">Gyorskötözők</a>
      <a routerLink="/profile">Kábelvégek</a>
      <a routerLink="/profile">Patentek</a>
      <a routerLink="/profile">Menetjavítók</a>
      <a routerLink="/profile">Rugók</a>
      <a routerLink="/profile">Szorítóbilincsek</a>
      <a routerLink="/profile">Sasszegek</a>
      <a routerLink="/profile">Szegecsek</a>
      <a routerLink="/profile">Szegecsanyák</a>
   </div>

   <div *ngIf="secondHover == 1 && thirdHover == 0" class="dropdown-horizontal horizontal-push-1 index-m-one">
      <a routerLink="/profile">Kézhigiénia</a>
      <a routerLink="/profile">Tisztítás</a>
   </div>

   <div *ngIf="secondHover == 1 && thirdHover == 2" class="dropdown-horizontal horizontal-push-1 index-m-one">
      <a routerLink="/profile">Saruk</a>
      <a routerLink="/profile">Töltők</a>
      <a routerLink="/profile">Bikakábelek</a>
      <a routerLink="/profile">Teszterek</a>
      <a routerLink="/profile">Indítók</a>
   </div>

   <div *ngIf="secondHover == 3 && thirdHover == 0" class="dropdown-horizontal horizontal-push-1 index-m-seven">
      <a routerLink="/profile">Alátétek</a>
      <a routerLink="/profile">O-gyűrűk</a>
   </div>

   <div *ngIf="secondHover == 3 && thirdHover == 1" class="dropdown-horizontal horizontal-push-1 index-m-seven">
      <a routerLink="/profile">Autós biztosítékok</a>
      <a routerLink="/profile">Egyéb biztosítékok</a>
   </div>

</div>

<!-- Others -->
<div *ngIf="localStorageUser() != ''" class="dropdown equipment-position">
   <button class="dropbtn">Egyéb termékek<mat-icon class="arrow">expand_more</mat-icon></button>
   <div class="dropdown-content">
      <a routerLink="/battery">Akkumulátor</a>
      <a routerLink="/profile">Autóápolás</a>
      <a routerLink="/profile">Beltér</a>
      <a routerLink="/profile">Kültér</a>
      <a routerLink="/profile">Folyadékok</a>
   </div>
</div>

<!-- Cart -->
<div *ngIf="localStorageUser() != ''" class="cart-dropdown cart-position">
   <button class="cart-btn"><mat-icon class="cart-icon">shopping_cart</mat-icon>Kosár<mat-icon class="arrow">expand_more</mat-icon></button>
   <button *ngIf="cartItems.length > 0" class="cart-indicator">{{ cartItems.length }}</button>
   <div class="cart-dropdown-content">

      <!-- Cart elements ngFor-->
      <div *ngFor="let product of cartItems; let i = index">
         <div style="position: relative">

            <!-- Product info -->
            <div class="img-bcg">
               <img src="{{ product.imgurl[0] }}" class="cart-img">
            </div>
            <a routerLink="/profile" class="cart-element-name">{{ product.partNumber }}</a>
            <a routerLink="/profile" class="cart-element-code">{{ product.name }}<span class="cart-element-brand">, {{ product.brand }}</span></a>
            <p class="cart-element-price">{{ product.price }}<span class="cart-element-amount">({{ cartItemsAmount[i] }} db)</span></p>

            <!-- Delete button -->
            <button mat-icon-button class="delete-icon" (click)="deleteCartItem(0)">
               <mat-icon>close</mat-icon>
            </button>

            <!-- Divider -->
            <mat-divider class="divider"></mat-divider>

         </div>
      </div>

      <!-- Subtotal -->
      <div class="subtotal">

         <p class="net-price">Nettó ár: {{ subtotalNet }}</p>
         <p class="actual-price">Bruttó ár: <span class="orange">{{ subtotal }}</span></p>

         <button class="checkout-button" mat-raised-button color="white" routerLink="cart">Kosár megtekintése</button>
         <button class="order-button" mat-raised-button color="warn" routerLink="cart">Megrendelés</button>
         
      </div>

   </div>
   
</div>

<!-- Account -->
<div *ngIf="localStorageUser() != ''" class="dropdown profile-position">
   <button class="dropbtn user-name">{{ getName() }}<mat-icon class="arrow arrow-user">expand_more</mat-icon><br><span class="user-email">{{ getEmail() }}</span></button>
   <div class="dropdown-content">
      <a routerLink="/profile">Személyes adatok</a>
      <a routerLink="/profile">Link 3</a>
      <a routerLink="/login" (click)="logOut()">Kijelentkezés</a>
   </div>
</div>

<!-- The routed views render in the <router-outlet>-->
<router-outlet *ngIf="!searchedSomething"></router-outlet>

<app-products *ngIf="isIf || searchedSomething" [searchedText]="searchedText"></app-products>