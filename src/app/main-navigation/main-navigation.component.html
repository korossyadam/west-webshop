<div class="container">
   <div class="inner-container">

      <!-- Top left and top right parallelograms -->
      <div class="parallelogram parallelogram-left"></div>
      <div class="parallelogram parallelogram-right"></div>

      <!-- Clickable logo -->
      <h2 class="logo" routerLink="/main"><span class="primary">WEST</span> ALKATRÉSZ</h2>

      <!-- 2 buttons -->
      <div class="buttons-container">
         <div class="buttons-inner-container">
            <button class="button carselect-button" mat-raised-button color="primary" (click)="onCarSelectorButtonClick()">Jármű kiválasztása</button>
            <button class="button offer-button" mat-raised-button routerLink="/offer">Árajánlat kérése</button>
         </div>
      </div>

      <!-- Search field -->
      <div class="search-container">
         <div class="search-inner-container">
            <input class="search-field" placeholder="Cikkszám, gyári szám.." maxlength="64" autocomplete="off" #searchField>

            <button mat-raised-button class="search-button" color="primary" (click)="searchForProduct(searchField.value)">
               <mat-icon>search</mat-icon>
            </button>
         </div>
      </div>

      <!-- Navigation options on the left -->
      <div class="nav-container">
         <nav>
            <ul>
               <li><a routerLink="/main">Főoldal</a></li>

               <li><a [routerLink]="['/categories', 0]">Garázs felszerelések<mat-icon class="arrow">expand_more</mat-icon></a>
                  <ul>
                     <div>
                        <li><a [routerLink]="['/categories', 0]">Szerszámok<mat-icon class="arrow-horizontal">chevron_right</mat-icon></a>
                           <ul>
                              <div>
                                 <li><a [routerLink]="['products', { specialCategory: 29 }]">Kézi szerszámok</a></li>
                                 <li><a [routerLink]="['products', { specialCategory: 30 }]">Elektromos szerszámok</a></li>
                                 <li><a [routerLink]="['products', { specialCategory: 31 }]">Mérőeszközök</a></li>
                              </div>
                           </ul>
                        </li>
                        <li><a [routerLink]="['/categories', 1]">Garázs berendezések<mat-icon class="arrow-horizontal">chevron_right</mat-icon></a>
                           <ul>
                              <div>
                                 <li><a [routerLink]="['/categories', 1]">Műhelyhigiénia<mat-icon class="arrow-horizontal">chevron_right</mat-icon></a>
                                    <ul>
                                       <div>
                                          <li><a [routerLink]="['products', { specialCategory: 32 }]">Kézhigiénia</a></li>
                                          <li><a [routerLink]="['products', { specialCategory: 33 }]">Tisztítás</a></li>
                                       </div>

                                    </ul>
                                 </li>
                                 <li><a [routerLink]="['products', { specialCategory: 34 }]">Klímaszervíz</a></li>
                                 <li><a [routerLink]="['products', { specialCategory: 35 }]">Akkumulátor szervíz<!--<mat-icon class="arrow-horizontal">chevron_right</mat-icon>--></a>
                                    <!--
                                    <ul>
                                       <div>
                                          <li><a routerLink="/categories">Saruk</a></li>
                                          <li><a routerLink="/categories">Töltők</a></li>
                                          <li><a routerLink="/categories">Bikakábelek</a></li>
                                          <li><a routerLink="/categories">Teszterek</a></li>
                                          <li><a routerLink="/categories">Indítók</a></li>
                                       </div>
                                    </ul>-->
                                 </li>
                              </div>
                           </ul>
                        </li>
                        <li><a [routerLink]="['/categories', 2]">Munkavédelmi kellékek<mat-icon class="arrow-horizontal">chevron_right</mat-icon></a>
                           <ul>
                              <div>
                                 <li><a [routerLink]="['products', { specialCategory: 36 }]">Ruházat</a></li>
                                 <li><a [routerLink]="['products', { specialCategory: 37 }]">Biztonsági felszerelés</a></li>
                              </div>
                           </ul>
                        </li>
                        <li><a [routerLink]="['/categories', 3]">Univerzális tartozékok<mat-icon class="arrow-horizontal">chevron_right</mat-icon></a>
                           <ul>
                              <div>
                                 <li><a [routerLink]="['/categories', 3]">Alátétek és O-gyűrűk<mat-icon class="arrow-horizontal">chevron_right</mat-icon></a>
                                    <ul>
                                       <div>
                                          <li><a [routerLink]="['products', { specialCategory: 38 }]">Alátétek</a></li>
                                          <li><a [routerLink]="['products', { specialCategory: 39 }]">O-gyűrűk</a></li>
                                       </div>
                                    </ul>
                                 </li>
                                 <li><a [routerLink]="['products', { specialCategory: 40 }]">Biztosítékok<!--<mat-icon class="arrow-horizontal">chevron_right</mat-icon>--></a>
                                    <!--
                                    <ul>
                                       <div>
                                          <li><a routerLink="/categories">Autós biztosítékok</a></li>
                                          <li><a routerLink="/categories">Egyéb biztosítékok</a></li>
                                       </div>
                                    </ul>-->
                                 </li>
                                 <!--<li><a routerLink="/categories">Csavaranyák</a></li>-->
                                 <li><a [routerLink]="['products', { specialCategory: 41 }]">Gyorskötözők</a></li>
                                 <!--
                                 <li><a routerLink="/categories">Kábelvégek</a></li>
                                 <li><a routerLink="/categories">Patentek</a></li>
                                 <li><a routerLink="/categories">Menetjavítók</a></li>
                                 <li><a routerLink="/categories">Rugók</a></li>
                                 <li><a routerLink="/categories">Szorítóbilincsek</a></li>
                                 <li><a routerLink="/categories">Sasszegek</a></li>
                                 <li><a routerLink="/categories">Szegecsek</a></li>
                                 <li><a routerLink="/categories">Szegecsanyák</a></li>-->
                              </div>
                           </ul>
                        </li>
                     </div>
                  </ul>
               </li>

               <li><a [routerLink]="['/categories2', 0]">Egyéb termékek<mat-icon class="arrow">expand_more</mat-icon></a>
                  <ul>
                     <div>
                        <li><a [routerLink]="['/categories2', 0]">Autóápolás<mat-icon class="arrow-horizontal">chevron_right</mat-icon></a>
                        <ul>
                           <div>
                              <li><a [routerLink]="['products', { specialCategory: 0 }]">Ablaktisztítás</a></li>
                              <li><a [routerLink]="['products', { specialCategory: 1 }]">Kefék, törlőkendők</a></li>
                              <li><a [routerLink]="['products', { specialCategory: 2 }]">Motorblokk tisztítás</a></li>
                              <li><a [routerLink]="['products', { specialCategory: 3 }]">Felni tisztítás</a></li>
                              <li><a [routerLink]="['products', { specialCategory: 4 }]">Polírozás</a></li>
                           </div>
                        </ul>
                     </li>
                        <li><a [routerLink]="['/categories2', 1]">Beltér<mat-icon class="arrow-horizontal">chevron_right</mat-icon></a>
                           <ul>
                              <div>
                                 <li><a [routerLink]="['products', { specialCategory: 5 }]">Üléshuzatok</a></li>
                                 <li><a [routerLink]="['products', { specialCategory: 6 }]">Kormányvédők</a></li>
                                 <li><a [routerLink]="['products', { specialCategory: 7 }]">Autószőnyegek</a></li>
                                 <li><a [routerLink]="['products', { specialCategory: 8 }]">Szivargyújtó</a></li>
                                 <li><a [routerLink]="['products', { specialCategory: 9 }]">Illatósítók</a></li>
                                 <li><a [routerLink]="['products', { specialCategory: 10 }]">Belső ventilátorok</a></li>
                              </div>
                           </ul>
                        </li>
                        <li><a [routerLink]="['/categories2', 2]">Kültér<mat-icon class="arrow-horizontal">chevron_right</mat-icon></a>
                           <ul>
                              <div>
                                 <li><a [routerLink]="['products', { specialCategory: 11 }]">Ablaktörlő lapátok</a></li>
                                 <li><a [routerLink]="['/categories2', 2]">Lámpák<mat-icon class="arrow-horizontal">chevron_right</mat-icon></a>
                                    <ul>
                                       <div>
                                          <li><a [routerLink]="['products', { specialCategory: 12 }]">Hátsó lámpák</a></li>
                                          <li><a [routerLink]="['/categories2', 2]">Gumilámpák<mat-icon class="arrow-horizontal">chevron_right</mat-icon></a>
                                             <ul>
                                                <div>
                                                   <li><a [routerLink]="['products', { specialCategory: 13 }]">Izzós</a></li>
                                                   <li><a [routerLink]="['products', { specialCategory: 14 }]">LED-es</a></li>
                                                </div>
                                             </ul>
                                          </li>
                                          <li><a [routerLink]="['/categories2', 2]">Helyzetjelzők<mat-icon class="arrow-horizontal">chevron_right</mat-icon></a>
                                             <ul>
                                                <div>
                                                   <li><a [routerLink]="['products', { specialCategory: 15 }]">Izzós</a></li>
                                                   <li><a [routerLink]="['products', { specialCategory: 16 }]">LED-es</a></li>
                                                </div>
                                             </ul>
                                          </li>
                                          <li><a [routerLink]="['/categories2', 2]">Munkalámpák<mat-icon class="arrow-horizontal">chevron_right</mat-icon></a>
                                             <ul>
                                                <div>
                                                   <li><a [routerLink]="['products', { specialCategory: 17 }]">Izzós</a></li>
                                                   <li><a [routerLink]="['products', { specialCategory: 18 }]">LED-es</a></li>
                                                </div>
                                             </ul>
                                          </li>
                                          <li><a [routerLink]="['/categories2', 2]">Megkülönböztető lámpák<mat-icon class="arrow-horizontal">chevron_right</mat-icon></a>
                                             <ul>
                                                <div>
                                                   <li><a [routerLink]="['products', { specialCategory: 19 }]">Izzós</a></li>
                                                   <li><a [routerLink]="['products', { specialCategory: 20 }]">LED-es</a></li>
                                                </div>
                                             </ul>
                                          </li>
                                       </div>
                                    </ul>
                                 </li>
                                 <li><a [routerLink]="['products', { specialCategory: 21 }]">Dísztárcsák</a></li>
                                 <li><a [routerLink]="['products', { specialCategory: 22 }]">Tanksapkák</a></li>
                                 <li><a [routerLink]="['products', { specialCategory: 23 }]">Rendszámtábla tartók</a></li>
                                 <li><a [routerLink]="['products', { specialCategory: 24 }]">Fényvisszaverők</a></li>
                              </div>
                           </ul>
                        </li>
                        <li><a [routerLink]="['/categories2', 3]">Folyadékok<mat-icon class="arrow-horizontal">chevron_right</mat-icon></a>
                           <ul>
                              <div>
                                 <li><a [routerLink]="['products', { specialCategory: 25 }]">Hajtómű olaj</a></li>
                                 <li><a [routerLink]="['products', { specialCategory: 26 }]">Fagyálló</a></li>
                                 <li><a [routerLink]="['/categories2', 3]">Ablakmosó folyadék<mat-icon class="arrow-horizontal">chevron_right</mat-icon></a>
                                    <ul>
                                       <div>
                                          <li><a [routerLink]="['products', { specialCategory: 27 }]">Nyári ablakmosó folyadék</a></li>
                                          <li><a [routerLink]="['products', { specialCategory: 28 }]">Téli ablakmosó folyadék</a></li>
                                       </div>
                                    </ul>
                                 </li>
                              </div>
                           </ul>
                        </li>
                     </div>
                  </ul>
               </li>

            </ul>
         </nav>
      </div>

      <!-- Account -->
      <div *ngIf="getName() != ''" class="profile-container">
         <nav>
            <ul>
               <li><a class="profile-name">{{ getName() }}<mat-icon class="profile-arrow">expand_more</mat-icon><br><span class="profile-email">{{ getEmail() }}</span></a>
                  <ul>
                     <div>
                        <li>
                           <a [routerLink]="['/profile', 0]">Személyes adatok</a>
                           <a [routerLink]="['/profile', 1]">Rendelések</a>
                           <a [routerLink]="['/profile', 2]">Cím módosítása</a>
                           <a [routerLink]="['/profile', 3]">Kívánságlista</a>
                           <a [routerLink]="['/profile', 4]">Árajánlatok</a>
                           <a [routerLink]="['/profile', 5]">Garázs</a>
                           <a routerLink="/login" (click)="logOut()">Kijelentkezés</a>
                        </li>
                     </div>
                  </ul>
               </li>
            </ul>

         </nav>
      </div>
      
      <!-- Cart -->
      <div *ngIf="getName() != ''" class="cart-container">
         <nav>
            <ul>
               <li>

                  <!-- The cart button on toolbar -->
                  <a class="cart-text" routerLink="/cart">
                     <mat-icon class="cart-icon">shopping_cart</mat-icon>Kosár
                     <mat-icon class="arrow">expand_more</mat-icon>
                     <div *ngIf="cartItems.length > 0" class="cart-indicator">
                        <p class="cart-indicator-text">{{ cartItems.length }}</p>
                     </div>
                  </a>

                  <!-- Cart dropdown content -->
                  <ul>
                     <div class="cart-content-container">

                        <!-- Cart elements ngFor-->
                        <div *ngFor="let product of cartItems; let i = index">
                           <div class="cart-product-container">

                              <!-- Product image -->
                              <div class="product-img-container">
                                 <img [src]="sanitize(product.imgurls[0].replace('[', '').replace(']', '').replace('/t_t100x100v2', ''))" class="product-img">
                              </div>

                              <!-- Product info -->
                              <div class="cart-product-info-container">
                                 <div class="product-name-container">
                                    <div class="product-name" [routerLink]="['/product', product.partNumber]">{{ product.name }}<span class="product-brand"> {{ product.brand }}</span></div>
                                 </div>
                                 <p class="product-code">{{ product.partNumber }}</p>
                                 <p class="product-price">{{ formatPriceToString(addTax(product.price)) }}
                                    <span class="product-amount">({{ product.quantity }} db)</span>
                                 </p>
                              </div>

                              <!-- Delete button -->
                              <button mat-icon-button class="delete-icon" (click)="deleteCartItem(i)">
                                 <mat-icon>close</mat-icon>
                              </button>

                              <!-- Divider -->
                              <mat-divider class="divider"></mat-divider>

                           </div>
                        </div>

                        <!-- Subtotal -->
                        <div class="total-container">

                           <!-- Prices -->
                           <div class="price-container">
                              <p class="net-price">Nettó ár: {{ formatPriceToString(total) }}</p>
                              <p class="actual-price">Bruttó ár: <span class="primary">{{ formatPriceToString(addTax(total)) }}</span></p>
                           </div>

                           <!-- Navigate to cart buttons -->
                           <button class="checkout-button" mat-raised-button color="white" routerLink="cart">Kosár megtekintése</button>
                           <button class="order-button" mat-raised-button color="primary" routerLink="cart">Megrendelés</button>

                        </div>
                     </div>
                  </ul>
               </li>
            </ul>
         </nav>
      </div>

      <!-- Login buttons -->
      <div *ngIf="getName() == ''" class="login-buttons-container">
         <span class="login-button" routerLink="/login">Bejelentkezés</span>
         <span class="login-button" routerLink="/login">Regisztráció</span>
      </div>

   </div>

   <!-- Bottom center trapezoid below search bar -->
   <div class="trapezoid"></div>
</div>

<!-- The routed views render in the <router-outlet>-->
<div class="router-outlet-container">
   <router-outlet></router-outlet>
</div>