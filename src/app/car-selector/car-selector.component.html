
<!-- Displayed selected vehicle image on top of everything-->
<mat-card *ngIf="hoveredTextIndex != -1 && stage == 1" [ngStyle]="imgCardStyle">
    <img src="{{ obj1[hoveredTextIndex].imgurl }}" alt="" onerror="this.src='https://www.bcm-institute.org/wp-content/uploads/2020/11/No-Image-Icon.png'">
</mat-card>

<!-- Upper SideNav for searchbars -->
<mat-sidenav-container hasBackdrop="true" class="upper-sidenav-container">
   <mat-sidenav class="upper-sidenav" mode="over" disableClose="true" #upperSideNav>
      
      <!-- Selectors -->
      <div class="upper-menu">

         <!-- Brand select -->
         <div *ngIf="stage == 0">
             <p class="main-label">Jármű kiválasztása</p>
            <input type="text" class="text-input" placeholder="Márka" (input)="reAddBrands($event)"/>
         </div>

         <!-- Chassis select -->
         <div *ngIf="stage == 1">
            <button mat-icon-button class="back-icon" (click)="back()">
                <mat-icon>arrow_back_ios</mat-icon>
            </button>
            <p class="main-label extra-push">Karosszéria kiválasztása</p>
            <input type="text" class="text-input"/>
            <input type="text" class="text-input"/>
         </div>

         <!-- Engine select -->
         <div *ngIf="stage == 2">
            <button mat-icon-button class="back-icon" (click)="back()">
                <mat-icon>arrow_back_ios</mat-icon>
            </button>
            <p class="main-label extra-push">Motor kiválasztása</p>
            <input type="text" class="text-input"/>
            <input type="text" class="text-input"/>
            <input type="text" class="text-input"/>
         </div>
      </div>

      <div class="closing-side" (click)="closeSideNavs()"></div>

      <br>
      
   </mat-sidenav>

   <!-- Upper SideNav main content -->
    <mat-sidenav-content>

        <!-- Lower SideNav for listElements -->
        <mat-sidenav-container hasBackdrop="true" class="lower-sidenav-container">
            <mat-sidenav class="lower-sidenav" mode="over" (onClose)="closeSideNavs()" disableClose="true" #lowerSideNav>

                 <!-- *ngFor for every element in the list -->
                <div class="lower-menu">
                    <tbody>
                        
                        <div class="framed">
                            <!-- Engine selector-->
                            <div *ngIf="stage == 0">
                                <ng-container *ngFor="let element of listElements; let i = index">
                                    <tr><td *ngIf="lastDecor != getNewDecor(element)" class="decor-row">{{ lastDecor }}</td></tr>
                                    <tr>
                                        <td><a id={{i}} class="car-type-button" [ngClass]="{'hovered': hoveredTextIndex === i}" (mouseover)="setHoveredIndex(i)" (click)="selectElements(element)">{{ element }}</a></td>
                                    </tr>
        
                                </ng-container>
                            </div>

                            <!-- Chassis selector -->
                            <div *ngIf="stage == 1">
                                <ng-container *ngFor="let element of listElements; let i = index">
                                    <tr *ngIf="lastDecor != getNewDecor(element)" class="decor-row">
                                        <td class="decor-row half-width">{{ lastDecor }}</td>
                                        <td class="decor-row half-width"></td>
                                    </tr>
                                    <tr>
                                        <td><a id={{i}} class="car-type-button inline-block half-width" [ngClass]="{'hovered': hoveredTextIndex === i}" (mouseover)="setHoveredIndex(i)" (click)="selectElements(element)">{{ element }}</a></td>
                                        <td class="car-type-button inline-block half-width" [ngClass]="{'hovered': hoveredTextIndex === i}" (mouseover)="setHoveredIndex(i)" (click)="selectElements(element)">{{ obj1?.[i]?.year }}</td>
                                    </tr>
        
                                </ng-container>
                            </div>
                        </div>
                        

                        <!-- Engine selector-->
                        <div *ngIf="stage == 2">
                            <td class="decor-row fifth-width fixed_1">Típus</td>
                            <td class="decor-row fifth-width fixed_2">Gyártási év</td>
                            <td class="decor-row fifth-width fixed_3">KW</td>
                            <td class="decor-row fifth-width fixed_4">LE</td>
                            <td class="decor-row fifth-width fixed_5">CM<sup>3</sup></td>

                            <div class="framed">
                                <ng-container *ngFor="let element of listElements; let i = index">
                                
                                    <tr *ngIf="lastDecor != getNewDecor(element)">
                                        <td class="decor-row fifth-width">{{ lastDecor }}</td>
                                        <td class="decor-row fifth-width"></td>
                                        <td class="decor-row fifth-width"></td>
                                        <td class="decor-row fifth-width"></td>
                                        <td class="decor-row fifth-width"></td>
                                    </tr>
                                    <tr>
                                        <td id={{i}} class="car-type-button fifth-width inline-block"  [ngClass]="{'hovered': hoveredTextIndex === i}" (mouseover)="setHoveredIndex(i)" (click)="selectElements(element)">{{ element }}<span class="engine-code"><br>{{ obj2?.[i]?.engineCode }}</span></td>
                                        <td class="car-type-button fifth-width inline-block" [ngClass]="{'hovered': hoveredTextIndex === i}" (mouseover)="setHoveredIndex(i)">{{ obj2?.[i]?.year }}</td>
                                        <td class="car-type-button fifth-width inline-block center" [ngClass]="{'hovered': hoveredTextIndex === i}" (mouseover)="setHoveredIndex(i)">{{ obj2?.[i]?.kw }}</td>
                                        <td class="car-type-button fifth-width inline-block center" [ngClass]="{'hovered': hoveredTextIndex === i}" (mouseover)="setHoveredIndex(i)">{{ obj2?.[i]?.hp }}</td>
                                        <td class="car-type-button fifth-width inline-block center" [ngClass]="{'hovered': hoveredTextIndex === i}" (mouseover)="setHoveredIndex(i)">{{ obj2?.[i]?.displacement }}</td>
                                    </tr>
        
                                </ng-container>
                            </div>

                           
                        </div>

                        
                    </tbody>
                </div>

                 

            </mat-sidenav>
            <!-- Actual main content -->
            <mat-sidenav-content>
                <app-main-navigation (carSelectClickedEvent)="openSideNav()"></app-main-navigation>
            </mat-sidenav-content>

        </mat-sidenav-container>

    </mat-sidenav-content> 
</mat-sidenav-container>

